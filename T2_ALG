#include <stdio.h>
#include <stdlib.h>
#include <math.h>

#include "MovimentarCarros.h"
#include "Locacao_de_Carros.h"
#include "Cadastro_de_Novos_Veiculos.h"
#include "CadastrodeNovosClientes.h"
#include "Cadastro_de_Novas_Filiais.h"

int CadastrodeNovosClientes(){

	FILE *Cadastro_de_Novos_Cliente;
	Cadastro_de_Novos_Cliente = fopen("Cadastro_de_Novos_Cliente.txt","w");
	if (Cadastro_de_Novos_Cliente == NULL){
		puts("Erro na Abertura do Arquivo \n");

		exit(1);   




		
	}
	int aux=0;

	Clientes cadastro [200];
	int condicional=1,Indice=0;

	while (condicional>0){
		puts("=============================================================================");
		puts("=============================================================================");
		puts("DESEJA REALIZAR CADASTRO DE NOVOS CLIENTES ? {1} PARA SIM! {0} PARA NAO!");
		scanf("%d",&condicional);
		puts("=============================================================================");
		puts("=============================================================================");
		
		getchar();
		if(condicional >0){

			puts("=============================================================================");
			puts("=============================================================================");
			puts ("Digite o Primeiro nome do clinte ");
			fgets(cadastro[Indice].primeiroNome,101,stdin);
			puts("=============================================================================");
			puts("=============================================================================");
			
			int i=0;
			puts ("Digite o CPF  do clinte ");
				for(i=0;i<11;i++){
					scanf("%u",&cadastro[Indice].CPF[i]);	
				}getchar();
			puts("=============================================================================");
			puts("=============================================================================");

			puts ("Digite o Ultimo nome do clinte ");
			fgets(cadastro[Indice].UltimoNome,101,stdin);
			
			puts("=============================================================================");
			puts("=============================================================================");

			puts ("Digite A Senha do clinte (6 digitos) ");
			fgets(cadastro[Indice].senha,7,stdin);	
			getchar();
			
			puts("=============================================================================");
			puts("=============================================================================");
			getchar();
			puts ("Digite o Endereço do clinte ");
			fgets(cadastro[Indice].endereco,101,stdin);		
					
			
			puts("=============================================================================");
			puts("=============================================================================");

			puts("Digite o numero do cadastro ( Separado por espaço )");
			scanf("%d %d %d %d",&cadastro[Indice].identificador[0],&cadastro[Indice].identificador[1],&cadastro[Indice].identificador[2],&cadastro[Indice].identificador[3]);
			
			puts("=============================================================================");
			puts("=============================================================================");
			

			aux=((cadastro[Indice].identificador[0]*9)+(cadastro[Indice].identificador[1]*8)+(cadastro[Indice].identificador[2]*7)+(cadastro[Indice].identificador[3]*6));

				if (aux%11==0){
					
					aux=0;

				}else aux=1;
				
			
			
		fprintf(Cadastro_de_Novos_Cliente, "\t=============================================================================\n");
		fprintf(Cadastro_de_Novos_Cliente, "\t=============================================================================\n");
		fprintf(Cadastro_de_Novos_Cliente, "\tCliente número:%d\n",Indice );
		fprintf(Cadastro_de_Novos_Cliente,"\tPrimeiro Nome:%s\n",cadastro[Indice].primeiroNome);
		fprintf(Cadastro_de_Novos_Cliente,"\tUltimo Nome:%s\n",cadastro[Indice].UltimoNome);
		fprintf(Cadastro_de_Novos_Cliente,"\tEndereço:%s\n",cadastro[Indice].endereco);
		fprintf(Cadastro_de_Novos_Cliente,"\tSenha:%s\n",cadastro[Indice].senha);
		fprintf(Cadastro_de_Novos_Cliente,"\tCPF:");
			for(i=0;i<11;i++){
				fprintf(Cadastro_de_Novos_Cliente,"%u",cadastro[Indice].CPF[i]);
			}printf("\n");
		fprintf(Cadastro_de_Novos_Cliente,"\n\tNumero da Conta:%d %d %d %d %d \n", cadastro[Indice].identificador[0],cadastro[Indice].identificador[1],cadastro[Indice].identificador[2],cadastro[Indice].identificador[3],aux);
		fprintf(Cadastro_de_Novos_Cliente, "\t=============================================================================\n");
		fprintf(Cadastro_de_Novos_Cliente, "\t=============================================================================\n");
		Indice++;
		}
	}
fclose(Cadastro_de_Novos_Cliente);
return 0;

}

int Cadastro_de_Novos_Veiculos (){

	FILE *Cadastro_de_Novos_Veiculos;
	Cadastro_de_Novos_Veiculos = fopen("Cadastro_de_Novos_Veiculos.txt","w");
	if (Cadastro_de_Novos_Veiculos == NULL){
		puts("Erro na Abertura do Arquivo \n");

		exit(1);
	}
	Veiculos cadastro[200];

	int condicional=1,Indice=0;
		
		while (condicional>0){
			puts("=============================================================================");
			puts("=============================================================================");
			puts("DESEJA REALIZAR CADASTRO DE NOVO VEÍCULO ? {1} PARA SIM! {0} PARA NAO!");
			scanf("%d",&condicional);
			puts("=============================================================================");
			puts("=============================================================================");
			getchar();
		
				if (condicional >0){
					puts ("Digite A Placa do Veículo");
					fgets(cadastro[Indice].placaDoVeiculo,101,stdin);
					puts("=============================================================================");
					puts("=============================================================================");
					
					puts ("Digite O modelo do Veículo");
					fgets(cadastro[Indice].modeloDoCarro,101,stdin);
					puts("=============================================================================");
					puts("=============================================================================");


					puts ("Digite O ano de fabricação do Veículo");
					fgets(cadastro[Indice].anoDeFabricacao,101,stdin);
					puts("=============================================================================");
					puts("=============================================================================");
						

					puts ("Digite o estado do carro");
					fgets(cadastro[Indice].estadoDoCarro,101,stdin);
					puts("=============================================================================");
					puts("=============================================================================");	

					puts ("Digite a quilometragem do carro (só Número)");
					scanf("%lu",&cadastro[Indice].KM);
					puts("=============================================================================");
					puts("=============================================================================");	



					printf("%s\n",cadastro[Indice].placaDoVeiculo );
					printf("%s\n",cadastro[Indice].modeloDoCarro );
					printf("%s\n",cadastro[Indice].anoDeFabricacao );
					printf("%s\n",cadastro[Indice].estadoDoCarro );
					printf("%.2lu\n",cadastro[Indice].KM );
					Indice++;
				}getchar();
		}
fclose(Cadastro_de_Novos_Veiculos);
return 0;

}

int Cadastro_de_Novas_Filiais (){

	FILE *Cadastro_de_Novas_Filiais;
	Cadastro_de_Novas_Filiais = fopen("Cadastro_de_Novas_Filiais.txt","w");
	if (Cadastro_de_Novas_Filiais == NULL){
		puts("Erro na Abertura do Arquivo \n");

		exit(1);
	}
	Filiais cadastro[200];

	int condicional=1,Indice=0;
		
		while (condicional>0){

			puts("=============================================================================");
			puts("=============================================================================");
			puts("DESEJA REALIZAR CADASTRO DE NOVA FILIAL ? {1} PARA SIM! {0} PARA NAO!");
			scanf("%d",&condicional);
			puts("=============================================================================");
			puts("=============================================================================");
			getchar();
			if (condicional>0){

					puts("=============================================================================");
					puts("=============================================================================");
					puts ("Digite o código da filial");
					scanf("%d",&cadastro[Indice].codigoFilial);
					puts("=============================================================================");
					puts("=============================================================================");
					getchar();
					puts ("Digite a cidade da filial");
					fgets(cadastro[Indice].cidadeFilial,101,stdin);
					puts("=============================================================================");
					puts("=============================================================================");
					
					fprintf(Cadastro_de_Novas_Filiais, "Código da Filial |%d| Cidade da filial |%s\n",cadastro[Indice].codigoFilial,cadastro[Indice].cidadeFilial );
					
			}
		}Indice++;

return 0;
}

int Locacao_de_Carros (){
	int aux=0;
	FILE *Locacao_de_Carros;
	Locacao_de_Carros = fopen("Locacao_de_Carros.txt","w");
	if (Locacao_de_Carros == NULL){
		puts("Erro na Abertura do Arquivo \n");

		exit(1);
	}

	Locacao cadastro[200];
	Clientes cadastros [200];

	int condicional=1,Indice=0;
		
		while (condicional>0){
			puts("=============================================================================");
			puts("=============================================================================");
			puts("DESEJA REALIZAR NOVA LOCAÇÃO ? {1} PARA SIM! {0} PARA NAO!");
			scanf("%d",&condicional);
			puts("=============================================================================");
			puts("=============================================================================");
			getchar();

				if (condicional>0){

					puts("=============================================================================");
					puts("=============================================================================");
					puts("Digite o código da filial");
					scanf("%d",&cadastro[Indice].codigoFilial);
					getchar();
					puts("=============================================================================");
					puts("=============================================================================");
					puts("Digite a placa do carro escolido");
					fgets(cadastro[Indice].placaDoVeiculo,101,stdin);
					puts("=============================================================================");
					puts("=============================================================================");
					puts("Digite o KM inicial ");
					scanf("%lu",&cadastro[Indice].KM);
					puts("=============================================================================");
					puts("=============================================================================");
					puts("Digite a data de locação ");
					fgets(cadastro[Indice].dataLocacao,17,stdin);
					puts("=============================================================================");
					puts("=============================================================================");
					puts("Digite o numero do cadastro ( Separado por espaço )");
					scanf("%d %d %d %d",&cadastros[Indice].identificador[0],&cadastros[Indice].identificador[1],&cadastros[Indice].identificador[2],&cadastros[Indice].identificador[3]);
					puts("=============================================================================");
					puts("=============================================================================");
					
					puts("Digite o custo inicial de locação e o custo por KM rodado ");
					scanf("%lu %lu",&cadastro[Indice].custoInicial,&cadastro[Indice].custoKM);
					puts("=============================================================================");
					puts("=============================================================================");
					
				
				}

		}Indice++;

return 0;
}

int MovimentarCarros (){

	FILE *MovimentarCarros;
	MovimentarCarros = fopen("MovimentarCarros.txt","w");
	if (MovimentarCarros == NULL){
		puts("Erro na Abertura do Arquivo \n");

		exit(1);
	}

	Movimentar cadastro[200];

	int condicional=1,Indice=0;
		
		while (condicional>0){
			puts("=============================================================================");
			puts("=============================================================================");
			puts("DESEJA REALIZAR TRANSFERENCIA ENTRE FILIAIS? {1} PARA SIM! {0} PARA NAO!");
			scanf("%d",&condicional);
			puts("=============================================================================");
			puts("=============================================================================");
			getchar();


				if (condicional>0){

					puts("=============================================================================");
					puts("=============================================================================");		
					puts("Digite a placa do carro escolido");
					fgets(cadastro[Indice].placaDoVeiculo,101,stdin);
					puts("=============================================================================");
					puts("=============================================================================");
					puts ("Digite o código da filial");
					scanf("%d",&cadastro[Indice].codigoFilial);
					puts("=============================================================================");
					puts("=============================================================================");
				}
			}Indice++;
return 0;
}



int main (){


	int condicional=8,Indice=0;

		while (condicional>0){
			puts("=============================================================================");
			puts("=============================================================================");
			puts("=Digite {0} para sair                                                       =");
			puts("=Digite {1} para Cadastro de Novos Clientes                                 =");
			puts("=Digite {2} para Cadastro de Novos Veiculos                                 =");
			puts("=Digite {3} para Cadastro de Novas Filiais                                  =");
			puts("=Digite {4} para Realizar uma locação                                       =");
			puts("=Digite {5} para Realizar uma transferencia entre Filiais                   =");
			puts("=============================================================================");
			puts("=============================================================================");

			scanf("%d",&condicional);
				if (condicional>0){
					switch (condicional){
					
					case 1:
					
						CadastrodeNovosClientes();

					break;

					case 2:

						Cadastro_de_Novos_Veiculos();

					break;

					case 3:

						Cadastro_de_Novas_Filiais ();

					break;

					case 4:

						Locacao_de_Carros();

					break;

					case 5:

						MovimentarCarros();

					break;
					
					default :
					printf("Digite um numero valido\n");
					}
				}Indice++;
		}
	return 0;
}
